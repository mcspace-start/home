"use strict";(self["webpackChunkfgmusic"]=self["webpackChunkfgmusic"]||[]).push([[315],{2315:function(t,s,i){i.r(s),i.d(s,{default:function(){return v}});var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"main_wrapper"},[s("div",{staticClass:"bio"},[s("div",{staticClass:"bio_head"},[s("div",{staticClass:"avatar_wrapper"},[s("el-image",{staticClass:"avatar",attrs:{src:t.arInfo.picUrl,fit:"cover"}},[s("div",{staticClass:"image-slot box",attrs:{slot:"placeholder"},slot:"placeholder"},[s("span",[s("i",{staticClass:"el-icon-loading"})])]),s("div",{attrs:{slot:"error"},slot:"error"},[s("i",{staticClass:"el-icon-picture-outline"})])]),s("div",{staticClass:"colBtn",on:{click:function(s){return t.toggleCol(t.arInfo)}}},[s("i",{class:t.arInfo.isCol?"el-icon-check":"el-icon-plus"})])],1),s("div",{staticClass:"name"},[t._v(t._s(t.arInfo.name?t.arInfo.name:"####"))])]),s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"description",attrs:{"element-loading-background":"var(--loading-bg-color)"}},[t.showRetry?s("retry",{on:{retry:t.getData}}):s("div",{staticClass:"content"},t._l(t.arInfo.description,(function(i,a){return s("p",{key:a},[t._v(" "+t._s(i)+" ")])})),0)],1)]),s("div",{staticClass:"songList"},[s("div",{staticClass:"head"},[s("span",[t._v("TA的音乐")]),s("div",{staticClass:"playListBtn global-scale",on:{click:function(s){return s.stopPropagation(),t.playArSongs()}}},[s("i",{staticClass:"el-icon-caret-right"})])]),s("div",{staticClass:"list_content"},[s("songsList",{ref:"songsList",attrs:{opts:{type:"aSongs",id:t.arInfo.id}}})],1)]),s("div",{staticClass:"albums"},[t._m(0),s("div",{staticClass:"list_content"},[s("albumsList",{attrs:{id:t.arInfo.id}})],1)])])},e=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"head"},[s("span",[t._v("TA的专辑")])])}],r=(i(4052),i(6953),i(4825),function(){var t=this,s=t._self._c;return s("div",{staticClass:"albums_main"},[t.showRetry?s("retry",{on:{retry:t.getData}}):t._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.showRetry,expression:"!showRetry"},{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"content",staticClass:"content",attrs:{"element-loading-background":"var(--loading-bg-color)"}},[s("el-scrollbar",{ref:"scrollContainer",staticStyle:{height:"100%"},attrs:{"wrap-style":"overflow-x: hidden;"}},[s("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.getData,expression:"getData"}],staticClass:"content_i",attrs:{"infinite-scroll-disabled":"infiniteDisabled","infinite-scroll-immediate":"false"}},t._l(t.albumListData,(function(a){return s("div",{key:a.id,staticClass:"item",attrs:{title:a.name},on:{click:function(s){return t.goToPlaylistDetail(a)}}},[s("div",{staticClass:"albums_img"},[a.picUrl?s("img",{attrs:{src:a.picUrl,alt:""}}):s("svg",{staticClass:"song-avatar",attrs:{version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"423.000000pt",height:"423.000000pt",viewBox:"0 0 423.000000 423.000000",preserveAspectRatio:"xMidYMid meet"}},[s("g",{attrs:{transform:"translate(0.000000,423.000000) scale(0.100000,-0.100000)",fill:"var(--primar-color)",stroke:"none"}},[s("path",{attrs:{d:"M2215 3538 c-39 -21 -126 -114 -156 -164 -84 -148 -92 -380 -24 -710\n6 -29 3 -33 -97 -105 -56 -42 -125 -91 -153 -109 -225 -152 -313 -273 -337\n-462 -36 -288 115 -557 388 -692 127 -62 247 -79 438 -61 l73 7 14 -63 c24\n-113 18 -149 -52 -294 -21 -44 -84 -96 -138 -114 -86 -28 -231 -5 -271 44 -8\n11 -10 16 -5 13 18 -11 105 11 136 33 45 32 72 93 67 150 -9 94 -78 151 -189\n157 -59 4 -74 1 -119 -24 -115 -63 -145 -164 -85 -284 29 -57 75 -100 145\n-136 52 -28 62 -29 185 -29 125 0 132 1 197 32 87 41 169 118 198 186 20 46\n22 62 16 162 -3 60 -9 128 -12 151 -6 39 -4 41 28 54 58 22 152 91 196 144\n141 168 159 408 45 603 -32 55 -116 130 -185 165 -66 33 -201 53 -271 40 -26\n-5 -49 -7 -51 -3 -2 3 -12 35 -21 70 l-16 63 75 73 c125 121 217 284 254 449\n24 108 21 282 -6 379 -32 114 -96 229 -152 274 -19 15 -88 16 -115 1z m148\n-282 c34 -31 41 -61 35 -147 -7 -91 -54 -188 -141 -290 -64 -75 -143 -146\n-153 -136 -3 2 -10 59 -16 127 -17 185 5 292 82 399 52 72 143 94 193 47z\nm-249 -973 c11 -71 8 -82 -26 -97 -50 -22 -143 -100 -176 -148 -104 -152 -71\n-394 73 -530 81 -77 175 -111 183 -66 2 9 -5 19 -16 22 -73 24 -182 237 -182\n359 0 94 62 197 139 232 23 10 43 16 45 14 4 -5 176 -752 176 -766 0 -5 -33\n-14 -72 -20 -126 -17 -294 15 -389 75 -66 42 -150 129 -181 188 -68 127 -48\n293 54 443 57 83 325 331 358 331 4 0 10 -17 14 -37z m236 -225 c52 -23 142\n-123 179 -201 82 -171 77 -352 -12 -453 -38 -44 -94 -81 -104 -70 -8 7 -180\n740 -177 747 5 9 72 -5 114 -23z"}})])])]),s("div",{staticClass:"CD"},[s("img",{attrs:{src:i(6345),alt:""}})]),s("div",{staticClass:"albums_name"},[t._v(t._s(a.name))]),s("div",{staticClass:"btn"},[s("i",{staticClass:"iconfont icon-bofang"})])])})),0)])],1)],1)}),n=[],l=(i(1135),{name:"AlbumsList",props:{id:{type:Number,default:0}},data(){return{loading:!1,showRetry:!1,albumListData:[],infiniteDisabled:!1,limit:10,offset:0}},created(){this.getData()},methods:{async getData(){this.loading=!0,this.showRetry=!1;this.id;try{await this.getAlbumsListData()}catch(t){console.error(t),this.showRetry=!0,this.$message.error("获取专辑列表失败！")}this.loading=!1},async getAlbumsListData(){const t=this.id;if(!t)return void(this.showRetry=!0);const s="/artist/album";let{data:i}=await this.$http.get(s,{params:{id:t,limit:this.limit,offset:this.offset}});i.more||(this.infiniteDisabled=!0),this.offset+=this.limit,i=i.hotAlbums;const a=i.map((t=>({id:t.id,picUrl:t.blurPicUrl+"?param=200y200",name:t.name})));this.albumListData.push(...a)},goToPlaylistDetail(t){this.$router.push({name:"PlaylistDetailPage",query:{id:t.id,name:t.name,picUrl:t.picUrl,type:"albums"}})}}}),o=l,c=i(6367),d=(0,c.A)(o,r,n,!1,null,"62a913c0",null),m=d.exports,g=i(4235),h=i(1078),u={name:"ArtistsDetailPage",components:{songsList:h.A,albumsList:m,Retry:g.A},data(){return{arInfo:{id:0,name:"",picUrl:"",description:"",isCol:!1},showRetry:!1,loading:!1}},created(){this.getData()},methods:{toggleCol(t){if(!t.id)return;let s=JSON.parse(localStorage.getItem("myCol")||"{}");const i=s.artists||[],a=i.findIndex((s=>s.id==t.id));t.isCol?(i.splice(a,1),this.$message.success("取消收藏成功！"),t.isCol=!1):(i.push({id:t.id,name:t.name,picUrl:t.picUrl}),this.$message.success("添加收藏成功！"),t.isCol=!0),s.artists=i,localStorage.setItem("myCol",JSON.stringify(s))},checkIsCol(t){let s=localStorage.getItem("myCol");return!!s&&(s=JSON.parse(s),!!s.artists&&s.artists.some((s=>s.id===Number(t))))},async getData(){if(!Object.keys(this.$route.query))return;this.loading=!0;const t=this.$route.query;this.arInfo.id=Number(t.id),this.arInfo.picUrl=t.picUrl,this.arInfo.name=t.name,this.arInfo.isCol=this.checkIsCol(t.id);try{await this.getArDetail(t.id)}catch(s){console.error(s),this.showRetry=!0,this.$message.error("获取歌手详情数据失败!")}this.loading=!1},async getArDetail(t){const s="/artist/detail";let{data:i}=await this.$http.get(s,{params:{id:t}}),a=i.data.artist.briefDesc;const e=a.split(/\n/);this.arInfo.description=e},playArSongs(){this.$refs.songsList&&this.$refs.songsList.playEntirePlaylist()}}},p=u,f=(0,c.A)(p,a,e,!1,null,"0f66d733",null),v=f.exports},6345:function(t,s,i){t.exports=i.p+"img/CD.d6f14aaa.png"}}]);
//# sourceMappingURL=315.f1d5d4ba.js.map