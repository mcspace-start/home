{"version":3,"file":"js/478.04cc9cfb.js","mappings":"0JAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,MAAM,CAACE,YAAY,SAAS,CAACJ,EAAIK,GAAG,UAAUH,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,MAAM,CAACE,YAAY,MAAME,GAAG,CAAC,MAAQN,EAAIO,oBAAoB,CAACP,EAAIK,GAAG,cAAcH,EAAG,MAAM,CAACM,IAAI,UAAUJ,YAAY,WAAW,CAA6B,GAA3BJ,EAAIS,aAAaC,OAAaR,EAAG,MAAM,CAACE,YAAY,SAAS,CAACF,EAAG,MAAM,CAACE,YAAY,WAAW,CAACJ,EAAIK,GAAG,YAAYL,EAAIW,KAAKT,EAAG,eAAe,CAACU,YAAY,CAAC,OAAS,QAAQC,MAAM,CAAC,aAAa,wBAAwB,CAACX,EAAG,MAAM,CAACE,YAAY,aAAaJ,EAAIc,GAAId,EAAIS,cAAc,SAASM,EAAKC,GAAO,OAAOd,EAAG,MAAM,CAACe,IAAID,EAAMZ,YAAY,aAAaE,GAAG,CAAC,SAAW,SAASY,GAAQ,OAAOlB,EAAImB,iBAAiBJ,EAAK,IAAI,CAACb,EAAG,MAAM,CAACE,YAAY,SAAS,CAACJ,EAAIK,GAAGL,EAAIoB,GAAGJ,EAAQ,MAAMd,EAAG,MAAM,CAACE,YAAY,aAAa,CAACJ,EAAIK,GAAGL,EAAIoB,GAAGL,EAAKM,SAASnB,EAAG,MAAM,CAACE,YAAY,eAAeF,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,MAAM,CAACE,YAAY,WAAWkB,MAAO,CAC3+BC,MAAOR,EAAKS,SAAW,SAClBtB,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACJ,EAAIK,GAAGL,EAAIoB,GAAGL,EAAKS,UAAU,OAAuB,aAAfT,EAAKU,OAAuBvB,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACJ,EAAIK,GAAG,UAAUL,EAAIW,KAAqB,UAAfI,EAAKU,OAAoBvB,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACJ,EAAIK,GAAG,UAAUL,EAAIW,KAAqB,eAAfI,EAAKU,OAAyBvB,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,MAAM,CAACE,YAAY,qBAAqB,CAACJ,EAAIK,GAAG,WAAWL,EAAIW,MAAM,IAAG,MAAM,IACte,EACIe,EAAkB,G,oCCmDtB,GACAC,IAAAA,GACA,OAuBA,CAEA,EACAC,OAAAA,GAEA,KAAAC,UAAA,CACAZ,IAAA,eACAQ,QAAA,GAEA,EACAK,OAAAA,GAEA,KAAAD,UAAA,CACAZ,IAAA,eACAQ,QAAA,GAEA,EACAM,SAAA,KACAC,EAAAA,EAAAA,YAAA,mBAEAC,QAAA,KACAC,EAAAA,EAAAA,YAAA,CACA,oBACA,YACA,iBACA,uBAGAC,eAAAA,CAAAC,GACA,IAAAC,EAAA,GACA,MAAAC,EAAAF,EAAAG,KAAAxB,GACAA,EAAAM,OAOA,OAJAgB,EADAC,EAAA5B,OAAA,EACA,KAEA4B,EAAAE,KAAA,OAEAH,CACA,EAEAI,UAAAA,CAAA1B,GACA,IAAA2B,EAAAC,aAAAC,QAAA,SACA,QAAAF,IACAA,EAAAG,KAAAC,MAAAJ,KACAA,EAAAK,OAAAL,EAAAK,MAAAC,MAAAC,GAAAA,EAAAC,KAAAnC,EAAAmC,KAGA,EAEA,sBAAA/B,CAAAgC,GAEA,IACA,IAAAC,QAAA,KAAAC,MAAAC,IAAA,oBAAAH,EAAAD,IACAE,EAAAA,EAAAzB,KAAAoB,MAAA,GAEA,IAAAQ,QAAA,KAAAF,MAAAC,IAAA,gBAAAH,EAAAD,IACAK,EAAAA,EAAA5B,KAAAA,KAAA,GACA,MAAA6B,IAAAD,EAAAE,IAEAC,EAAA,CACAR,GAAAC,EAAAD,GACAS,SAAAR,EAAA9B,KACAuC,MAAAR,EAAAS,GAAAxC,KACAyC,OAAA,KAAA3B,gBAAAiB,EAAAW,IACAC,GAAAZ,EAAAY,GACAC,IAAAb,EAAAa,IACAC,cAAAX,EAAAW,cACAC,MAAA,KAAA1B,WAAAU,GACAK,WAAAA,EACAY,OAAAhB,EAAAS,GAAAO,OACAX,IAAAF,EAAAE,KAGA,KAAAY,eAAA,CAAAX,IACA,KAAAY,oBAAA,EACA,OAAAC,GACA,KAAAC,SAAAC,MAAA,cACA,CACA,EAEAlE,iBAAAA,GACA,QAAAE,aAAAC,QACA,KAAAgE,SAAA,mBACAC,kBAAA,KACAC,iBAAA,KACAC,KAAA,UACAC,YAAA,eAEAC,MAAA,KACA,KAAAC,mBAAA,IAEAC,OAAA,QACA,IC7K2P,I,UCQvPC,GAAY,OACd,EACAnF,EACA2B,GACA,EACA,KACA,WACA,MAIF,EAAewD,EAAiB,O","sources":["webpack://fgmusic/./src/views/DownloadList.vue","webpack://fgmusic/src/views/DownloadList.vue","webpack://fgmusic/./src/views/DownloadList.vue?ae78","webpack://fgmusic/./src/views/DownloadList.vue?9380"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"download_main\"},[_c('div',{staticClass:\"head\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"下载列表\")]),_c('div',{staticClass:\"buttons\"},[_c('div',{staticClass:\"btn\",on:{\"click\":_vm.clearDownLoadList}},[_vm._v(\"清空歌曲\")])])]),_c('div',{ref:\"content\",staticClass:\"content\"},[(_vm.downloadList.length == 0)?_c('div',{staticClass:\"empty\"},[_c('div',{staticClass:\"empty_i\"},[_vm._v(\"没有数据\")])]):_vm._e(),_c('el-scrollbar',{staticStyle:{\"height\":\"100%\"},attrs:{\"wrap-style\":\"overflow-x: hidden;\"}},[_c('div',{staticClass:\"content_i\"},_vm._l((_vm.downloadList),function(item,index){return _c('div',{key:index,staticClass:\"table_item\",on:{\"dblclick\":function($event){return _vm.playSpecificSong(item)}}},[_c('div',{staticClass:\"index\"},[_vm._v(_vm._s(index + 1))]),_c('div',{staticClass:\"song_name\"},[_vm._v(_vm._s(item.name))]),_c('div',{staticClass:\"item_empty\"}),_c('div',{staticClass:\"progress_wrap\"},[_c('div',{staticClass:\"progress\",style:({\n                width: item.progress + '%',\n              })})]),_c('div',{staticClass:\"progress_txt\"},[_vm._v(_vm._s(item.progress)+\"%\")]),(item.status == 'completed')?_c('div',{staticClass:\"msg\"},[_c('div',{staticClass:\"msg_i completed\"},[_vm._v(\"完成\")])]):_vm._e(),(item.status == 'failed')?_c('div',{staticClass:\"msg\"},[_c('div',{staticClass:\"msg_i failed\"},[_vm._v(\"失败\")])]):_vm._e(),(item.status == 'downloading')?_c('div',{staticClass:\"msg\"},[_c('div',{staticClass:\"msg_i downloading\"},[_vm._v(\"下载中\")])]):_vm._e()])}),0)])],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"download_main\">\r\n    <!-- 头部 -->\r\n    <div class=\"head\">\r\n      <!-- 标题 -->\r\n      <div class=\"title\">下载列表</div>\r\n      <!-- 按钮 -->\r\n      <div class=\"buttons\">\r\n        <div class=\"btn\" @click=\"clearDownLoadList\">清空歌曲</div>\r\n      </div>\r\n    </div>\r\n    <!-- 渲染列表 -->\r\n    <div class=\"content\" ref=\"content\">\r\n      <!-- empty -->\r\n      <div class=\"empty\" v-if=\"downloadList.length == 0\">\r\n        <div class=\"empty_i\">没有数据</div>\r\n      </div>\r\n      <el-scrollbar style=\"height: 100%\" wrap-style=\"overflow-x: hidden;\">\r\n        <div class=\"content_i\">\r\n          <div\r\n            class=\"table_item\"\r\n            v-for=\"(item, index) in downloadList\"\r\n            :key=\"index\"\r\n            @dblclick=\"playSpecificSong(item)\"\r\n          >\r\n            <div class=\"index\">{{ index + 1 }}</div>\r\n            <div class=\"song_name\">{{ item.name }}</div>\r\n            <div class=\"item_empty\"></div>\r\n            <div class=\"progress_wrap\">\r\n              <div\r\n                class=\"progress\"\r\n                :style=\"{\r\n                  width: item.progress + '%',\r\n                }\"\r\n              ></div>\r\n            </div>\r\n            <div class=\"progress_txt\">{{ item.progress }}%</div>\r\n            <div v-if=\"item.status == 'completed'\" class=\"msg\">\r\n              <div class=\"msg_i completed\">完成</div>\r\n            </div>\r\n            <div v-if=\"item.status == 'failed'\" class=\"msg\">\r\n              <div class=\"msg_i failed\">失败</div>\r\n            </div>\r\n            <div v-if=\"item.status == 'downloading'\" class=\"msg\">\r\n              <div class=\"msg_i downloading\">下载中</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </el-scrollbar>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions, mapGetters } from \"vuex\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      // downloadList: [\r\n      //   {\r\n      //     id: 0,\r\n      //     name: \"歌曲名称\",\r\n      //     progress: 0,\r\n      //     status: \"downloading\", // Downloading Completed Failed\r\n      //     song: {},\r\n      //   },\r\n      //   {\r\n      //     id: 2,\r\n      //     name: \"歌曲名称\",\r\n      //     progress: 100,\r\n      //     status: \"completed\", // Dowvnloading Completed Failed\r\n      //     song: {},\r\n      //   },\r\n      //   {\r\n      //     id: 3,\r\n      //     name: \"歌曲名称\",\r\n      //     progress: 100,\r\n      //     status: \"failed\", // Downloading Completed Failed\r\n      //     song: {},\r\n      //   },\r\n      // ],\r\n    };\r\n  },\r\n  mounted() {\r\n    // 取消红点\r\n    this.setBadges({\r\n      key: \"DownloadList\",\r\n      status: false,\r\n    });\r\n  },\r\n  updated() {\r\n    // 取消红点\r\n    this.setBadges({\r\n      key: \"DownloadList\",\r\n      status: false,\r\n    });\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"downloadList\"]),\r\n  },\r\n  methods: {\r\n    ...mapActions([\r\n      \"clearDownloadList\",\r\n      \"setBadges\",\r\n      \"pushToPlaylist\",\r\n      \"updateCurrentTrack\",\r\n    ]),\r\n    // 格式化名字\r\n    arNameFormatted(nameList) {\r\n      let str = \"\";\r\n      const nameArr = nameList.map((item) => {\r\n        return item.name;\r\n      });\r\n      if (nameArr.length > 3) {\r\n        str = \"群星\";\r\n      } else {\r\n        str = nameArr.join(\" & \");\r\n      }\r\n      return str;\r\n    },\r\n    // 判断是否为本地收藏\r\n    checkIsCol(item) {\r\n      let myCol = localStorage.getItem(\"myCol\");\r\n      if (myCol) {\r\n        myCol = JSON.parse(myCol);\r\n        return myCol.songs ? myCol.songs.some((i) => i.id === item.id) : false;\r\n      }\r\n      return false;\r\n    },\r\n    // 播放指定索引歌曲\r\n    async playSpecificSong(song) {\r\n      console.log(\"播放下载列表歌曲\");\r\n      try {\r\n        let songData = await this.$http.get(\"/song/detail?ids=\" + song.id);\r\n        songData = songData.data.songs[0];\r\n        // 获取url\r\n        let urlData = await this.$http.get(\"/song/url?id=\" + song.id);\r\n        urlData = urlData.data.data[0];\r\n        const isPlayable = !!urlData.url;\r\n\r\n        const obj = {\r\n          id: song.id,\r\n          songName: song.name,\r\n          album: songData.al.name,\r\n          arName: this.arNameFormatted(songData.ar),\r\n          dt: songData.dt,\r\n          fee: songData.fee,\r\n          freeTrialInfo: urlData.freeTrialInfo,\r\n          isCol: this.checkIsCol(song),\r\n          isPlayable: isPlayable,\r\n          picUrl: songData.al.picUrl,\r\n          url: urlData.url,\r\n        };\r\n        // 添加至播放列表\r\n        this.pushToPlaylist([obj]);\r\n        this.updateCurrentTrack(-1);\r\n      } catch (err) {\r\n        this.$message.error(\"播放下载列表歌曲失败！\");\r\n      }\r\n    },\r\n    // 清空下载列表\r\n    clearDownLoadList() {\r\n      if (this.downloadList.length == 0) return;\r\n      this.$confirm(\"确定清空下载列表吗？\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n        customClass: \"messageBox\",\r\n      })\r\n        .then(() => {\r\n          this.clearDownloadList();\r\n        })\r\n        .catch(() => {});\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n// 无数据\r\n.empty {\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  & > .empty_i {\r\n    width: 134px;\r\n    height: 42px;\r\n    background-color: var(--nav-bg-color);\r\n    color: var(--secondary-text-color);\r\n    border-radius: 12px;\r\n    line-height: 42px;\r\n    text-align: center;\r\n    font-size: 16px;\r\n  }\r\n}\r\n.download_main {\r\n  height: 100%;\r\n  position: relative;\r\n  .head {\r\n    height: 48px;\r\n    margin-bottom: 18px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    padding: 0 88px 0 10px;\r\n    position: relative;\r\n\r\n    .title {\r\n      flex: 1;\r\n      font-size: 28px;\r\n      line-height: 48px;\r\n      color: var(--primary-text-color);\r\n    }\r\n    .buttons {\r\n      flex: 1;\r\n      width: 50px;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: flex-end;\r\n      color: var(--secondary-text-color);\r\n\r\n      .btn {\r\n        transition: all var(--transition-duration);\r\n        margin-left: 16px;\r\n        display: inline-block;\r\n        height: 34px;\r\n        padding: 0 24px;\r\n        cursor: pointer;\r\n        background-color: var(--button-bg-color);\r\n        vertical-align: top;\r\n        text-align: center;\r\n        line-height: 34px;\r\n        font-size: 14px;\r\n        color: var(--primary-text-color);\r\n        box-shadow: 0 16px 14px var(--primary-shadow-color);\r\n        letter-spacing: 2px;\r\n        border-radius: 10px;\r\n        &:hover {\r\n          color: var(--text-hover-color);\r\n          background-color: var(--primar-color);\r\n          box-shadow: 0 16px 14px var(--secondary-shadow-color);\r\n          transform: translateY(-4px);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .content {\r\n    width: 100%;\r\n    top: 62px;\r\n    bottom: 0;\r\n    position: absolute;\r\n    overflow: hidden;\r\n    box-sizing: border-box;\r\n\r\n    .table_item {\r\n      padding-right: 70px;\r\n      height: 44px;\r\n      margin-bottom: 20px;\r\n      background: var(--downloadlist-bg-color);\r\n      display: flex;\r\n      font-size: 14px;\r\n      align-items: center;\r\n      padding-left: 16px;\r\n      font-weight: bold;\r\n      color: var(--secondary-text-colo);\r\n      transition: all var(--transition-duration);\r\n\r\n      border-radius: 12px;\r\n      & > div {\r\n        flex-shrink: 0;\r\n        color: var(--secondary-text-color);\r\n      }\r\n      &:hover {\r\n        background: var(--secondary-bg-color);\r\n      }\r\n      .index {\r\n        width: 46px;\r\n        flex: 0 0 46px;\r\n      }\r\n      .song_name {\r\n        flex: 1;\r\n        overflow: hidden;\r\n        white-space: nowrap;\r\n        text-overflow: ellipsis;\r\n        font-size: 14px;\r\n      }\r\n      .item_empty {\r\n        flex: 1;\r\n      }\r\n      .progress_wrap {\r\n        width: 152px;\r\n        margin-right: 10px;\r\n        background-color: var(--progress-bar-bg-color);\r\n        .progress {\r\n          width: 0%;\r\n          height: 10px;\r\n          background-color: var(--primar-color);\r\n          border-radius: 4px;\r\n          transition: width var(--transition-duration);\r\n        }\r\n      }\r\n      .progress_txt {\r\n        width: 40px;\r\n        font-size: 14px;\r\n        color: var(--secondary-text-color);\r\n        font-weight: bold;\r\n      }\r\n      .msg {\r\n        width: 90px;\r\n        height: 24px;\r\n        text-align: center;\r\n        .msg_i {\r\n          display: inline-block;\r\n          height: 100%;\r\n          line-height: 24px;\r\n          padding: 0 10px;\r\n          border-radius: 5px;\r\n          color: #dcdcdc;\r\n          font-size: 14px;\r\n          &.completed {\r\n            background-color: #7566e8;\r\n          }\r\n          &.downloading {\r\n            background-color: #32a78b;\r\n          }\r\n          &.failed {\r\n            background-color: #ef5350;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n// .btns {\r\n//   position: absolute;\r\n//   bottom: 0;\r\n//   width: 100%;\r\n// }\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./DownloadList.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./DownloadList.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./DownloadList.vue?vue&type=template&id=326c1a72&scoped=true\"\nimport script from \"./DownloadList.vue?vue&type=script&lang=js\"\nexport * from \"./DownloadList.vue?vue&type=script&lang=js\"\nimport style0 from \"./DownloadList.vue?vue&type=style&index=0&id=326c1a72&prod&scoped=true&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"326c1a72\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","_v","on","clearDownLoadList","ref","downloadList","length","_e","staticStyle","attrs","_l","item","index","key","$event","playSpecificSong","_s","name","style","width","progress","status","staticRenderFns","data","mounted","setBadges","updated","computed","mapGetters","methods","mapActions","arNameFormatted","nameList","str","nameArr","map","join","checkIsCol","myCol","localStorage","getItem","JSON","parse","songs","some","i","id","song","songData","$http","get","urlData","isPlayable","url","obj","songName","album","al","arName","ar","dt","fee","freeTrialInfo","isCol","picUrl","pushToPlaylist","updateCurrentTrack","err","$message","error","$confirm","confirmButtonText","cancelButtonText","type","customClass","then","clearDownloadList","catch","component"],"sourceRoot":""}