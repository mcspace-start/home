{"version":3,"file":"js/918.3818ccb3.js","mappings":"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","sources":["webpack://fgmusic/./src/components/PlaylistDetailPage.vue","webpack://fgmusic/src/components/PlaylistDetailPage.vue","webpack://fgmusic/./src/components/PlaylistDetailPage.vue?9506","webpack://fgmusic/./src/components/PlaylistDetailPage.vue?e271"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"main\"},[_c('div',{ref:\"info\",staticClass:\"info\"},[_c('div',{staticClass:\"info_wrap\"},[_c('div',{staticClass:\"info_i_top\"},[_c('el-image',{staticClass:\"logo\",attrs:{\"src\":_vm.playlistsData.picUrl,\"fit\":\"cover\"}},[_c('div',{attrs:{\"slot\":\"placeholder\"},slot:\"placeholder\"},[_c('span',[_c('i',{staticClass:\"el-icon-loading\"})])]),_c('div',{attrs:{\"slot\":\"error\"},slot:\"error\"},[_c('i',{staticClass:\"el-icon-picture-outline\"})])]),_c('div',{staticClass:\"btn\",class:{\n            isCol: _vm.playlistsData.isCol,\n          },on:{\"click\":function($event){return _vm.toggleCol(_vm.playlistsData)}}},[_c('i',{staticClass:\"iconfont icon-tx-shizixing\"}),_vm._v(\" \"+_vm._s(_vm.playlistsData.isCol ? \"取消收藏\" : \"收藏歌单\")+\" \")])],1),_c('div',{staticClass:\"info_i_bottom\"},[_c('p',{staticClass:\"name\"},[_vm._v(\"《\"+_vm._s(_vm.playlistsData.name)+\"》\")]),_c('p',{staticClass:\"description\"},[_vm._v(_vm._s(_vm.playlistsData.description))])])])]),_c('div',{staticClass:\"list\"},[_c('div',{staticClass:\"head\"},[_c('span',[_vm._v(\"音乐列表\")]),_c('div',{staticClass:\"playListBtn\",on:{\"click\":function($event){$event.stopPropagation();return _vm.playAlSongs.apply(null, arguments)}}},[_c('i',{staticClass:\"el-icon-caret-right\"})])]),_c('div',{staticClass:\"list_content\"},[_c('songs-list',{ref:\"songsList\",attrs:{\"opts\":{\n          type: _vm.playlistsData.type,\n          id: _vm.playlistsData.id,\n        }}})],1)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"main\">\r\n    <!-- 左侧 -->\r\n    <div class=\"info\" ref=\"info\">\r\n      <!-- 内包裹 -->\r\n      <div class=\"info_wrap\">\r\n        <!-- 头像及按钮 -->\r\n        <div class=\"info_i_top\">\r\n          <!-- el-image -->\r\n          <el-image class=\"logo\" :src=\"playlistsData.picUrl\" fit=\"cover\">\r\n            <div slot=\"placeholder\">\r\n              <span>\r\n                <i class=\"el-icon-loading\"></i>\r\n              </span>\r\n            </div>\r\n            <div slot=\"error\">\r\n              <i class=\"el-icon-picture-outline\"></i>\r\n            </div>\r\n          </el-image>\r\n          <!-- 按钮 -->\r\n          <div\r\n            class=\"btn\"\r\n            :class=\"{\r\n              isCol: playlistsData.isCol,\r\n            }\"\r\n            @click=\"toggleCol(playlistsData)\"\r\n          >\r\n            <i class=\"iconfont icon-tx-shizixing\"></i>\r\n            {{ playlistsData.isCol ? \"取消收藏\" : \"收藏歌单\" }}\r\n          </div>\r\n        </div>\r\n        <!-- 介绍 -->\r\n        <div class=\"info_i_bottom\">\r\n          <p class=\"name\">《{{ playlistsData.name }}》</p>\r\n          <p class=\"description\">{{ playlistsData.description }}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- 右侧 -->\r\n    <div class=\"list\">\r\n      <!-- 标题 -->\r\n      <div class=\"head\">\r\n        <span>音乐列表</span>\r\n        <!-- 按钮 -->\r\n        <div class=\"playListBtn\" @click.stop=\"playAlSongs\">\r\n          <i class=\"el-icon-caret-right\"></i>\r\n        </div>\r\n      </div>\r\n      <!-- 渲染组件 -->\r\n      <div class=\"list_content\">\r\n        <songs-list\r\n          ref=\"songsList\"\r\n          :opts=\"{\r\n            type: playlistsData.type,\r\n            id: playlistsData.id,\r\n          }\"\r\n        ></songs-list>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport songsList from \"./SongsList.vue\";\r\nexport default {\r\n  name: \"PlaylistDetailPage\",\r\n  components: {\r\n    songsList,\r\n  },\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      playlistsData: {\r\n        id: 0,\r\n        name: \"\",\r\n        picUrl: \"\",\r\n        songs: [],\r\n        description: \"\",\r\n        isCol: false,\r\n        type: \"\",\r\n      },\r\n    };\r\n  },\r\n  created() {\r\n    this.getData();\r\n  },\r\n  methods: {\r\n    // 判断是否为本地收藏\r\n    checkIsCol(item) {\r\n      let myCol = localStorage.getItem(\"myCol\");\r\n      if (myCol) {\r\n        myCol = JSON.parse(myCol);\r\n        return myCol.playlists\r\n          ? myCol.playlists.some((i) => i.id === item.id)\r\n          : false;\r\n      }\r\n      return false;\r\n    },\r\n    // 切换收藏\r\n    toggleCol(item) {\r\n      if (!this.playlistsData.id) return;\r\n      let localMyCol = JSON.parse(localStorage.getItem(\"myCol\") || \"{}\");\r\n      if (!localMyCol.playlists) {\r\n        localMyCol.playlists = [];\r\n      }\r\n      const index = localMyCol.playlists.findIndex((i) => i.id == item.id);\r\n      if (item.isCol) {\r\n        localMyCol.playlists.splice(index, 1);\r\n        this.$message.success(\"取消收藏成功！\");\r\n        item.isCol = false;\r\n      } else {\r\n        const item_temp = { ...item };\r\n        item_temp.songs = [];\r\n        localMyCol.playlists.push(item_temp);\r\n        this.$message.success(\"添加收藏成功！\");\r\n        item.isCol = true;\r\n      }\r\n      localStorage.setItem(\"myCol\", JSON.stringify(localMyCol));\r\n    },\r\n    // 播放歌单\r\n    playAlSongs() {\r\n      if (this.$refs.songsList) this.$refs.songsList.playEntirePlaylist();\r\n    },\r\n    async getData() {\r\n      const item = this.$route.query;\r\n      this.playlistsData.name = item.name ? item.name : \"####\";\r\n      this.playlistsData.id = item.id;\r\n      this.playlistsData.picUrl = item.picUrl ? item.picUrl : \"\";\r\n      try {\r\n        if (this.$route.query.type == \"albums\") {\r\n          this.playlistsData.type = \"alSongs\";\r\n          await this.getAlbumsData();\r\n        } else if (this.$route.query.type == \"playlist\") {\r\n          this.playlistsData.type = \"plSongs\";\r\n          await this.getPlaylistData();\r\n        }\r\n      } catch (err) {\r\n        console.error(err);\r\n        this.$message.error(\"获取歌单数据失败！\");\r\n      }\r\n    },\r\n    // 获取歌单数据\r\n    async getPlaylistData() {\r\n      console.log(\"获取歌单信息\");\r\n      if (!this.playlistsData.id) return;\r\n      const url = \"/playlist/detail\";\r\n      const id = this.playlistsData.id;\r\n      let { data } = await this.$http.get(url, {\r\n        params: {\r\n          id: id,\r\n        },\r\n      });\r\n      this.playlistsData.description = data.playlist.description;\r\n      this.playlistsData.isCol = this.checkIsCol(this.playlistsData);\r\n    },\r\n    // 获取专辑数据\r\n    async getAlbumsData() {\r\n      if (!this.playlistsData.id) return;\r\n      console.log(\"获取专辑详情\");\r\n      // /album?id=32311\r\n      const url = \"/album\";\r\n      const id = this.playlistsData.id;\r\n      let { data } = await this.$http.get(url, {\r\n        params: {\r\n          id: id,\r\n        },\r\n      });\r\n      this.playlistsData.description = data.album.description;\r\n      this.playlistsData.isCol = this.checkIsCol(this.playlistsData);\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.main {\r\n  display: flex;\r\n  height: 100%;\r\n  // 个人信息\r\n  .info {\r\n    flex: 1;\r\n    margin-right: 40px;\r\n    position: relative;\r\n    .info_wrap {\r\n      position: absolute;\r\n      height: 100%;\r\n      width: 100%;\r\n      display: flex;\r\n      flex-direction: column;\r\n      // 头部\r\n      .info_i_top {\r\n        width: 100%;\r\n        position: relative;\r\n        z-index: 1;\r\n        flex: 1;\r\n        min-height: 160px;\r\n        max-height: 50%;\r\n        .logo {\r\n          position: absolute;\r\n          bottom: -40px;\r\n          left: 30px;\r\n          width: 200px;\r\n          height: 200px;\r\n          border-radius: 36px;\r\n          z-index: 1;\r\n          font-size: 60px;\r\n          display: flex;\r\n          justify-content: center;\r\n          align-items: center;\r\n          background-color: var(--secondary-bg-color);\r\n        }\r\n        // 收藏按钮\r\n        .btn {\r\n          position: absolute;\r\n          right: 20px;\r\n          bottom: -48px;\r\n          cursor: pointer;\r\n          width: 136px;\r\n          height: 34px;\r\n          background-color: var(--button-bg-color);\r\n          box-shadow: 0 16px 14px var(--primary-shadow-color);\r\n          letter-spacing: 2px;\r\n          vertical-align: top;\r\n          text-align: center;\r\n          line-height: 34px;\r\n          font-size: 14px;\r\n          color: var(--secondary-text-color);\r\n          border-radius: 10px;\r\n          transition: all var(--transition-duration);\r\n          &:hover {\r\n            background-color: var(--primar-color);\r\n            box-shadow: 0 16px 14px var(--secondary-shadow-color);\r\n            transform: translateY(-4px);\r\n            color: var(--text-hover-color);\r\n            & > i {\r\n              color: var(--text-hover-color);\r\n            }\r\n          }\r\n          &.isCol:hover {\r\n            background-color: #ef5350;\r\n            box-shadow: 0 16px 14px #f25a57;\r\n          }\r\n        }\r\n      }\r\n      // 内容区域\r\n      .info_i_bottom {\r\n        border-radius: 20px;\r\n        background-color: var(--secondary-bg-color);\r\n        box-shadow: 1px 1px 4px var(--primary-shadow-color);\r\n        padding: 60px 15px 35px 15px;\r\n        overflow-y: scroll;\r\n        scrollbar-width: none;\r\n        .name {\r\n          font-size: 18px;\r\n          line-height: 30px;\r\n          color: var(--secondary-text-color);\r\n        }\r\n        .description {\r\n          font-size: 12px;\r\n          line-height: 18px;\r\n          color: var(--secondary-text-color);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  // 音乐列表\r\n  .list {\r\n    position: relative;\r\n    flex: 1.5;\r\n    .head {\r\n      position: relative;\r\n      height: 30px;\r\n      padding-left: 14px;\r\n      line-height: 30px;\r\n      font-size: 14px;\r\n      color: var(--primary-text-color);\r\n\r\n      &::before {\r\n        content: \"\";\r\n        display: block;\r\n        width: 4px;\r\n        height: 18px;\r\n        background-color: var(--primar-color);\r\n        position: absolute;\r\n        left: 0;\r\n        top: 6px;\r\n        border-radius: 4px;\r\n      }\r\n      & > .playListBtn {\r\n        cursor: pointer;\r\n        width: 30px;\r\n        height: 30px;\r\n        text-align: center;\r\n        border-radius: 40%;\r\n        line-height: 30px;\r\n        color: #fff;\r\n        font-size: 22px;\r\n        z-index: 1;\r\n        position: absolute;\r\n        right: 10px;\r\n        top: 18px;\r\n        background: var(--primar-color);\r\n        transition: transform var(--transition-duration);\r\n        &:hover {\r\n          transform: scale(1.05);\r\n        }\r\n      }\r\n    }\r\n    .list_content {\r\n      position: absolute;\r\n      overflow: hidden;\r\n      width: 100%;\r\n      top: 30px;\r\n      bottom: 0;\r\n      border-radius: 16px;\r\n      background: var(--secondary-bg-color);\r\n      overflow: hidden;\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PlaylistDetailPage.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PlaylistDetailPage.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./PlaylistDetailPage.vue?vue&type=template&id=0fc7c03e&scoped=true\"\nimport script from \"./PlaylistDetailPage.vue?vue&type=script&lang=js\"\nexport * from \"./PlaylistDetailPage.vue?vue&type=script&lang=js\"\nimport style0 from \"./PlaylistDetailPage.vue?vue&type=style&index=0&id=0fc7c03e&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0fc7c03e\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","ref","attrs","playlistsData","picUrl","slot","class","isCol","on","$event","toggleCol","_v","_s","name","description","stopPropagation","playAlSongs","apply","arguments","type","id","staticRenderFns","components","songsList","data","loading","songs","created","getData","methods","checkIsCol","item","myCol","localStorage","getItem","JSON","parse","playlists","some","i","localMyCol","index","findIndex","splice","$message","success","item_temp","push","setItem","stringify","$refs","playEntirePlaylist","$route","query","getAlbumsData","getPlaylistData","err","console","error","url","$http","get","params","playlist","album","component"],"sourceRoot":""}