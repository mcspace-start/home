"use strict";(self["webpackChunkfgmusic"]=self["webpackChunkfgmusic"]||[]).push([[478],{2478:function(t,s,a){a.r(s),a.d(s,{default:function(){return r}});var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"download_main"},[s("div",{staticClass:"head"},[s("div",{staticClass:"title"},[t._v("下载列表")]),s("div",{staticClass:"buttons"},[s("div",{staticClass:"btn",on:{click:t.clearDownLoadList}},[t._v("清空歌曲")])])]),s("div",{ref:"content",staticClass:"content"},[0==t.downloadList.length?s("div",{staticClass:"empty"},[s("div",{staticClass:"empty_i"},[t._v("没有数据")])]):t._e(),s("el-scrollbar",{staticStyle:{height:"100%"},attrs:{"wrap-style":"overflow-x: hidden;"}},[s("div",{staticClass:"content_i"},t._l(t.downloadList,(function(a,i){return s("div",{key:i,staticClass:"table_item",on:{dblclick:function(s){return t.playSpecificSong(a)}}},[s("div",{staticClass:"index"},[t._v(t._s(i+1))]),s("div",{staticClass:"song_name"},[t._v(t._s(a.name))]),s("div",{staticClass:"item_empty"}),s("div",{staticClass:"progress_wrap"},[s("div",{staticClass:"progress",style:{width:a.progress+"%"}})]),s("div",{staticClass:"progress_txt"},[t._v(t._s(a.progress)+"%")]),"completed"==a.status?s("div",{staticClass:"msg"},[s("div",{staticClass:"msg_i completed"},[t._v("完成")])]):t._e(),"failed"==a.status?s("div",{staticClass:"msg"},[s("div",{staticClass:"msg_i failed"},[t._v("失败")])]):t._e(),"downloading"==a.status?s("div",{staticClass:"msg"},[s("div",{staticClass:"msg_i downloading"},[t._v("下载中")])]):t._e()])})),0)])],1)])},e=[],l=(a(8992),a(1454),a(7550),a(9335)),n={data(){return{}},mounted(){this.setBadges({key:"DownloadList",status:!1})},updated(){this.setBadges({key:"DownloadList",status:!1})},computed:{...(0,l.mapGetters)(["downloadList"])},methods:{...(0,l.mapActions)(["clearDownloadList","setBadges","pushToPlaylist","updateCurrentTrack"]),arNameFormatted(t){let s="";const a=t.map((t=>t.name));return s=a.length>3?"群星":a.join(" & "),s},checkIsCol(t){let s=localStorage.getItem("myCol");return!!s&&(s=JSON.parse(s),!!s.songs&&s.songs.some((s=>s.id===t.id)))},async playSpecificSong(t){try{let s=await this.$http.get("/song/detail?ids="+t.id);s=s.data.songs[0];let a=await this.$http.get("/song/url?id="+t.id);a=a.data.data[0];const i=!!a.url,e={id:t.id,songName:t.name,album:s.al.name,arName:this.arNameFormatted(s.ar),dt:s.dt,fee:s.fee,freeTrialInfo:a.freeTrialInfo,isCol:this.checkIsCol(t),isPlayable:i,picUrl:s.al.picUrl,url:a.url};this.pushToPlaylist([e]),this.updateCurrentTrack(-1)}catch(s){this.$message.error("播放下载列表歌曲失败！")}},clearDownLoadList(){0!=this.downloadList.length&&this.$confirm("确定清空下载列表吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",customClass:"messageBox"}).then((()=>{this.clearDownloadList()})).catch((()=>{}))}}},o=n,d=a(1656),c=(0,d.A)(o,i,e,!1,null,"326c1a72",null),r=c.exports}}]);
//# sourceMappingURL=478.04cc9cfb.js.map