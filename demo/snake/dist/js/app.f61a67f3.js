(function(){"use strict";var e={8241:function(e,t,o){var n=o(5130),r=(o(4114),o(8992),o(3215),o(3949),o(7550),o(6768)),l=o(4232),s=o(144);const i={class:"score"},a={class:"main"},u={class:"warp"},c={class:"foods"},p={class:"wall"},f={class:"cover"},d={key:0,class:"menu_button",onclick:"script:window.location.reload()"};var h={__name:"App",setup(e){console.clear();const t=e=>({transform:`translate(${20*e.x}px ,${20*e.y}px)`}),o=(0,s.Kh)({parts:[],direction:"right",oldDirection:"right",paused:!0,game_over:!1,speed:200,wallCount:5,wallSize:6}),h=(0,s.Kh)([]),y=(0,s.KR)(0),v=[];let g=[];const m=(e,t=0)=>Math.floor(Math.random()*(e-t+1))+t,k=e=>{for(let t=0;t<20;t++){e.push([]);for(let o=0;o<20;o++)e[t].push({id:Symbol(),x:o,y:t})}};k(v);const w=()=>{const e=(e,t=g)=>{let o=e[0],n=e[1];const r=[[0,-1],[0,-2]],l=[[1,0],[2,0]],s=[[0,1],[0,2]],i=[[-1,0],[-2,0]],a=([e,r])=>{let l=o+e,s=n+r;if(l>=0&&l<v.length&&s>=0&&s<v[0].length){const e=t.some((e=>e.x==l&&e.y==s));return e}return!0};let u=!r.some(a)&&[o+r[0][0],n+r[0][1]],c=!l.some(a)&&[o+l[0][0],n+l[0][1]],p=!s.some(a)&&[o+s[0][0],n+s[0][1]],f=!i.some(a)&&[o+i[0][0],n+i[0][1]];return console.log("检查坐标"+e),console.log([u,c,p,f]),[u,c,p,f]};let t=0;const n=r=>{if(!(t<o.wallSize))return t=0,void console.log("长度达标，退出遍历");const l={id:Symbol(),x:r[0],y:r[1]};g.push(l),t++;const s=e(r),i=[2,3,0,1],a=[];if(s.forEach(((t,o)=>{const n=e(t);n[i[o]]=1,n.every((e=>e))&&a.push(o)})),0!==a.length){const e=m(a.length-1),t=s[a[e]];n(t)}else t=0,console.log("无空间下次创建")},r=()=>{const t=[0,0];while(1){const o=m(v[0].length-3,2),n=m(v.length-3,2),r=e([o,n]),l=r.some((e=>0==e));if(!l){t[0]=o,t[1]=n;break}}n(t)};for(let l=0;l<o.wallCount;l++)r()},x=()=>{let e=4;for(;e>=0;e--)o.parts.push({id:Symbol(),x:e,y:0})};x();const b=()=>{const e=[];v.forEach(((t,o)=>{t.forEach(((t,n)=>{e.push([n,o])}))}));const t=e.filter((e=>!(o.parts.some((t=>t.x===e[0]&&t.y===e[1]))||g.some((t=>t.x===e[0]&&t.y===e[1])))));if(t){const e=t[m(t.length-1)];h.push({id:Symbol(),x:e[0],y:e[1]})}else alert("游戏胜利"),o.paused=!0,console.log("游戏胜利")},E=()=>{if(o.game_over||o.paused)return;const e={up:"down",left:"right",down:"up",right:"left"};e[o.direction]==o.oldDirection?o.direction=o.oldDirection:o.oldDirection=o.direction;let t=o.parts[0].x,n=o.parts[0].y;switch(o.oldDirection){case"up":n-=1;break;case"left":t-=1;break;case"down":n+=1;break;case"right":t+=1;break}if(C({x:t,y:n}),!o.game_over){for(let e=o.parts.length-1;e>0;e--)o.parts[e]={...o.parts[e-1]};o.parts[0].x=t,o.parts[0].y=n,o.oldDirection=o.direction}},C=e=>{let t=g.some((t=>t.x==e.x&&t.y==e.y)),n=o.parts.some((t=>t.x==e.x&&t.y==e.y)),r=e.x<0||e.x>v.length-1||e.y<0||e.y>v[0].length-1;(t||n||r)&&(o.game_over=!0,o.paused=!0),h.forEach(((t,o)=>{e.x==t.x&&e.y==t.y&&(h.splice(o,1),_(e))}))},_=e=>{o.parts.push({id:Symbol(),x:e.x,y:e.y}),b(1),y.value++},X=()=>{o.game_over||o.paused||E(),setTimeout((()=>{X()}),o.speed)};return(0,r.sV)((()=>{const e={w:"up",a:"left",s:"down",d:"right",ArrowUp:"up",ArrowLeft:"left",ArrowDown:"down",ArrowRight:"right"};window.addEventListener("keydown",(t=>{const n=t.key;n in e&&(o.direction=e[n],t.preventDefault())," "!==n&&"Enter"!==n||(o.game_over&&window.location.reload(),o.paused=!o.paused,t.preventDefault())})),w(),b(),X()})),(e,m)=>((0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("div",i,"得分："+(0,l.v_)(y.value),1),(0,r.Lk)("div",a,[(0,r.Lk)("ul",u,[((0,r.uX)(),(0,r.CE)(r.FK,null,(0,r.pI)(v,((e,t)=>(0,r.Lk)("ul",{key:t},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e,(e=>((0,r.uX)(),(0,r.CE)("li",{key:e.id})))),128))]))),64))]),(0,r.Lk)("ul",{class:(0,l.C4)(["snake",o.oldDirection])},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.parts,((e,n)=>((0,r.uX)(),(0,r.CE)("li",{class:(0,l.C4)({head:0==n,tail:n==o.parts.length-1}),key:e.id,style:(0,l.Tr)(t(e))},null,6)))),128))],2),(0,r.Lk)("ul",c,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(h,(e=>((0,r.uX)(),(0,r.CE)("li",{key:e.id,style:(0,l.Tr)("transform:translate("+20*e.x+"px ,"+20*e.y+"px) rotate(45deg) scale(0.7)")},null,4)))),128))]),(0,r.Lk)("ul",p,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)((0,s.R1)(g),(e=>((0,r.uX)(),(0,r.CE)("li",{key:e.id,style:(0,l.Tr)(t(e))},null,4)))),128))]),(0,r.bo)((0,r.Lk)("div",f,[o.game_over?((0,r.uX)(),(0,r.CE)("div",d," 重来 ")):((0,r.uX)(),(0,r.CE)("div",{key:1,class:"menu_button",onClick:m[0]||(m[0]=e=>o.paused=!1)},"继续"))],512),[[n.aG,o.paused]])]),m[1]||(m[1]=(0,r.Lk)("a",{target:"_blank",href:"./js.txt"}," 查看代码",-1))],64))}};const y=h;var v=y;(0,n.Ef)(v).mount("#app")}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var l=t[n]={exports:{}};return e[n].call(l.exports,l,l.exports,o),l.exports}o.m=e,function(){var e=[];o.O=function(t,n,r,l){if(!n){var s=1/0;for(c=0;c<e.length;c++){n=e[c][0],r=e[c][1],l=e[c][2];for(var i=!0,a=0;a<n.length;a++)(!1&l||s>=l)&&Object.keys(o.O).every((function(e){return o.O[e](n[a])}))?n.splice(a--,1):(i=!1,l<s&&(s=l));if(i){e.splice(c--,1);var u=r();void 0!==u&&(t=u)}}return t}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[n,r,l]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,l,s=n[0],i=n[1],a=n[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(r in i)o.o(i,r)&&(o.m[r]=i[r]);if(a)var c=a(o)}for(t&&t(n);u<s.length;u++)l=s[u],o.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return o.O(c)},n=self["webpackChunksnake"]=self["webpackChunksnake"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[504],(function(){return o(8241)}));n=o.O(n)})();
//# sourceMappingURL=app.f61a67f3.js.map